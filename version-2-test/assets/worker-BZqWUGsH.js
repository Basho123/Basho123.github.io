(function(){"use strict";var G;(function(c){c[c.ETC1S=0]="ETC1S",c[c.UASTC4x4=1]="UASTC4x4"})(G||(G={}));var C;(function(c){c[c.ASTC_4X4_RGBA=0]="ASTC_4X4_RGBA",c[c.ASTC_4x4_RGBA=0]="ASTC_4x4_RGBA",c[c.BC7_RGBA=1]="BC7_RGBA",c[c.BC3_RGBA=2]="BC3_RGBA",c[c.BC1_RGB=3]="BC1_RGB",c[c.PVRTC1_4_RGBA=4]="PVRTC1_4_RGBA",c[c.PVRTC1_4_RGB=5]="PVRTC1_4_RGB",c[c.ETC2_RGBA=6]="ETC2_RGBA",c[c.ETC1_RGB=7]="ETC1_RGB",c[c.RGBA32=8]="RGBA32",c[c.R8=9]="R8",c[c.RG8=10]="RG8"})(C||(C={}));var At;(function(c){c[c.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",c[c.COMPRESSED_RGBA_ASTC_4X4_KHR=37808]="COMPRESSED_RGBA_ASTC_4X4_KHR",c[c.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",c[c.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",c[c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",c[c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",c[c.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",c[c.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",c[c.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",c[c.RGBA8Format=32856]="RGBA8Format",c[c.R8Format=33321]="R8Format",c[c.RG8Format=33323]="RG8Format"})(At||(At={}));class Ee{get byteOffset(){return this._dataByteOffset}constructor(n,s,p){n.buffer?this._dataView=new DataView(n.buffer,n.byteOffset+(s??0),p??n.byteLength):this._dataView=new DataView(n,s??0,p??n.byteLength),this._dataByteOffset=0}readUint8(){const n=this._dataView.getUint8(this._dataByteOffset);return this._dataByteOffset+=1,n}readInt8(){const n=this._dataView.getInt8(this._dataByteOffset);return this._dataByteOffset+=1,n}readUint16(){const n=this._dataView.getUint16(this._dataByteOffset,!0);return this._dataByteOffset+=2,n}readInt16(){const n=this._dataView.getInt16(this._dataByteOffset,!0);return this._dataByteOffset+=2,n}readUint32(){const n=this._dataView.getUint32(this._dataByteOffset,!0);return this._dataByteOffset+=4,n}readInt32(){const n=this._dataView.getInt32(this._dataByteOffset,!0);return this._dataByteOffset+=4,n}readUint64(){const n=this._dataView.getUint32(this._dataByteOffset,!0),s=this._dataView.getUint32(this._dataByteOffset+4,!0),p=n+2**32*s;return this._dataByteOffset+=8,p}readUint8Array(n){const s=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._dataByteOffset,n);return this._dataByteOffset+=n,s}skipBytes(n){return this._dataByteOffset+=n,this}}var Be;(function(c){c[c.None=0]="None",c[c.BasisLZ=1]="BasisLZ",c[c.ZStandard=2]="ZStandard",c[c.ZLib=3]="ZLib"})(Be||(Be={}));var Pt;(function(c){c[c.ETC1S=163]="ETC1S",c[c.UASTC=166]="UASTC"})(Pt||(Pt={}));var St;(function(c){c[c.RGB=0]="RGB",c[c.RRR=3]="RRR",c[c.GGG=4]="GGG",c[c.AAA=15]="AAA"})(St||(St={}));var Ut;(function(c){c[c.RGB=0]="RGB",c[c.RGBA=3]="RGBA",c[c.RRR=4]="RRR",c[c.RRRG=5]="RRRG"})(Ut||(Ut={}));var Ot;(function(c){c[c.linear=1]="linear",c[c.sRGB=2]="sRGB"})(Ot||(Ot={}));class He{constructor(n){this._data=n}get data(){return this._data}get header(){return this._header}get levels(){return this._levels}get dfdBlock(){return this._dfdBlock}get supercompressionGlobalData(){return this._supercompressionGlobalData}isValid(){return He.IsValid(this._data)}parse(){let n=12;const s=new Ee(this._data,n,68),p=this._header={vkFormat:s.readUint32(),typeSize:s.readUint32(),pixelWidth:s.readUint32(),pixelHeight:s.readUint32(),pixelDepth:s.readUint32(),layerCount:s.readUint32(),faceCount:s.readUint32(),levelCount:s.readUint32(),supercompressionScheme:s.readUint32(),dfdByteOffset:s.readUint32(),dfdByteLength:s.readUint32(),kvdByteOffset:s.readUint32(),kvdByteLength:s.readUint32(),sgdByteOffset:s.readUint64(),sgdByteLength:s.readUint64()};if(p.pixelDepth>0)throw new Error("Failed to parse KTX2 file - Only 2D textures are currently supported.");if(p.layerCount>1)throw new Error("Failed to parse KTX2 file - Array textures are not currently supported.");if(p.faceCount>1)throw new Error("Failed to parse KTX2 file - Cube textures are not currently supported.");n+=s.byteOffset;let _=Math.max(1,p.levelCount);const i=new Ee(this._data,n,_*3*8),T=this._levels=[];for(;_--;)T.push({byteOffset:i.readUint64(),byteLength:i.readUint64(),uncompressedByteLength:i.readUint64()});n+=i.byteOffset;const y=new Ee(this._data,p.dfdByteOffset,p.dfdByteLength),S=this._dfdBlock={vendorId:y.skipBytes(4).readUint16(),descriptorType:y.readUint16(),versionNumber:y.readUint16(),descriptorBlockSize:y.readUint16(),colorModel:y.readUint8(),colorPrimaries:y.readUint8(),transferFunction:y.readUint8(),flags:y.readUint8(),texelBlockDimension:{x:y.readUint8()+1,y:y.readUint8()+1,z:y.readUint8()+1,w:y.readUint8()+1},bytesPlane:[y.readUint8(),y.readUint8(),y.readUint8(),y.readUint8(),y.readUint8(),y.readUint8(),y.readUint8(),y.readUint8()],numSamples:0,samples:new Array};S.numSamples=(S.descriptorBlockSize-24)/16;for(let A=0;A<S.numSamples;A++){const w={bitOffset:y.readUint16(),bitLength:y.readUint8()+1,channelType:y.readUint8(),channelFlags:0,samplePosition:[y.readUint8(),y.readUint8(),y.readUint8(),y.readUint8()],sampleLower:y.readUint32(),sampleUpper:y.readUint32()};w.channelFlags=(w.channelType&240)>>4,w.channelType=w.channelType&15,S.samples.push(w)}const g=this._supercompressionGlobalData={};if(p.sgdByteLength>0){const A=new Ee(this._data,p.sgdByteOffset,p.sgdByteLength);g.endpointCount=A.readUint16(),g.selectorCount=A.readUint16(),g.endpointsByteLength=A.readUint32(),g.selectorsByteLength=A.readUint32(),g.tablesByteLength=A.readUint32(),g.extendedByteLength=A.readUint32(),g.imageDescs=[];const w=this._getImageCount();for(let E=0;E<w;E++)g.imageDescs.push({imageFlags:A.readUint32(),rgbSliceByteOffset:A.readUint32(),rgbSliceByteLength:A.readUint32(),alphaSliceByteOffset:A.readUint32(),alphaSliceByteLength:A.readUint32()});const U=p.sgdByteOffset+A.byteOffset,O=U+g.endpointsByteLength,B=O+g.selectorsByteLength,oe=B+g.tablesByteLength;g.endpointsData=new Uint8Array(this._data.buffer,this._data.byteOffset+U,g.endpointsByteLength),g.selectorsData=new Uint8Array(this._data.buffer,this._data.byteOffset+O,g.selectorsByteLength),g.tablesData=new Uint8Array(this._data.buffer,this._data.byteOffset+B,g.tablesByteLength),g.extendedData=new Uint8Array(this._data.buffer,this._data.byteOffset+oe,g.extendedByteLength)}}_getImageCount(){let n=Math.max(this._header.pixelDepth,1);for(let s=1;s<this._header.levelCount;s++)n+=Math.max(this._header.pixelDepth>>s,1);return Math.max(this._header.layerCount,1)*this._header.faceCount*n}get textureFormat(){return this._dfdBlock.colorModel===166?G.UASTC4x4:G.ETC1S}get hasAlpha(){switch(this.textureFormat){case G.ETC1S:return this._dfdBlock.numSamples===2&&(this._dfdBlock.samples[0].channelType===15||this._dfdBlock.samples[1].channelType===15);case G.UASTC4x4:return this._dfdBlock.samples[0].channelType===3}return!1}get needZSTDDecoder(){return this._header.supercompressionScheme===Be.ZStandard}get isInGammaSpace(){return this._dfdBlock.transferFunction===2}static IsValid(n){if(n.byteLength>=12){const s=new Uint8Array(n.buffer,n.byteOffset,12);if(s[0]===171&&s[1]===75&&s[2]===84&&s[3]===88&&s[4]===32&&s[5]===50&&s[6]===48&&s[7]===187&&s[8]===13&&s[9]===10&&s[10]===26&&s[11]===10)return!0}return!1}}class Y{static async LoadWASM(n){if(this.LoadBinariesFromCurrentThread)return await new Promise((p,_)=>{fetch(n).then(async i=>{if(i.ok)return await i.arrayBuffer();throw new Error(`Could not fetch the wasm component from "${n}": ${i.status} - ${i.statusText}`)}).then(i=>p(i)).catch(i=>{_(i)})});const s=this._RequestId++;return await new Promise(p=>{const _=i=>{i.data.action==="wasmLoaded"&&i.data.id===s&&(self.removeEventListener("message",_),p(i.data.wasmBinary))};self.addEventListener("message",_),postMessage({action:"loadWASM",path:n,id:s})})}constructor(n=Y.InitialMemoryPages){this._numPages=n,this._memory=new WebAssembly.Memory({initial:this._numPages}),this._memoryViewByteLength=this._numPages<<16,this._memoryViewOffset=0,this._memoryView=new Uint8Array(this._memory.buffer,this._memoryViewOffset,this._memoryViewByteLength)}get wasmMemory(){return this._memory}getMemoryView(n,s=0,p){return p=p??n<<16,this._numPages<n?(this._memory.grow(n-this._numPages),this._numPages=n,this._memoryView=new Uint8Array(this._memory.buffer,s,p),this._memoryViewByteLength=p,this._memoryViewOffset=s):(this._memoryView=new Uint8Array(this._memory.buffer,s,p),this._memoryViewByteLength=p,this._memoryViewOffset=s),this._memoryView}}Y.LoadBinariesFromCurrentThread=!0,Y.InitialMemoryPages=1*1024*1024>>16,Y._RequestId=0;class M{static RegisterTranscoder(n){M._Transcoders.push(n)}findTranscoder(n,s,p,_){let i=null;const T=G[n]+"_"+C[s];for(let y=0;y<M._Transcoders.length;++y)if(M._Transcoders[y].CanTranscode(n,s,p)&&(!_||_.indexOf(M._Transcoders[y].Name)<0)){i=this._getExistingTranscoder(T,M._Transcoders[y].Name),i||(i=new M._Transcoders[y],i.initialize(),i.needMemoryManager()&&(this._wasmMemoryManager||(this._wasmMemoryManager=new Y),i.setMemoryManager(this._wasmMemoryManager)),M._TranscoderInstances[T]||(M._TranscoderInstances[T]=[]),M._TranscoderInstances[T].push(i));break}return i}_getExistingTranscoder(n,s){const p=M._TranscoderInstances[n];if(p)for(let _=0;_<p.length;++_){const i=p[_];if(s===i.getName())return i}return null}}M._Transcoders=[],M._TranscoderInstances={};class D{static CanTranscode(n,s,p){return!1}static GetWasmUrl(n){if(D.WasmBaseUrl&&n.startsWith("https://cdn.babylonjs.com")){const s=D.WasmBaseUrl[D.WasmBaseUrl.length-1]==="/"?D.WasmBaseUrl.substring(0,D.WasmBaseUrl.length-1):D.WasmBaseUrl;n=n.replace("https://cdn.babylonjs.com",s)}return n}getName(){return D.Name}initialize(){}needMemoryManager(){return!1}setMemoryManager(n){}async transcode(n,s,p,_,i,T,y,S,g){return null}}D.Name="Transcoder",D.WasmBaseUrl="";class he extends D{constructor(){super(...arguments),this._wasmBinary=null}async _instantiateWebAssemblyAsync(n){return await WebAssembly.instantiate(n,{env:{memory:this._memoryManager.wasmMemory}}).then(s=>({module:s.instance.exports}))}async _loadModuleAsync(n=this._wasmBinary){return this._modulePromise=this._modulePromise||(n?Promise.resolve(n):Y.LoadWASM(this._modulePath)).then(async s=>await this._instantiateWebAssemblyAsync(s)),await this._modulePromise}get memoryManager(){return this._memoryManager}setModulePath(n,s){this._modulePath=D.GetWasmUrl(n),this._wasmBinary=s}initialize(){this._transcodeInPlace=!0}needMemoryManager(){return!0}setMemoryManager(n){this._memoryManager=n}async transcode(n,s,p,_,i,T,y,S,g){return await this._loadModuleAsync().then(A=>{const w=A.module,[U,O,B]=this._prepareTranscoding(_,i,T,g);return w.transcode(B)===0?this._transcodeInPlace?U.slice():O.slice():null})}_prepareTranscoding(n,s,p,_,i){const T=(n+3>>2)*(s+3>>2);i!==void 0&&(p=n*(s+3>>2)*4*i);const y=(T*16+65535+(this._transcodeInPlace?0:p)>>16)+1,S=this.memoryManager.getMemoryView(y,65536,T*16),g=this._transcodeInPlace?null:new Uint8Array(this._memoryManager.wasmMemory.buffer,65536+T*16,i!==void 0?n*s*i:p);return S.set(_),[S,g,T]}}class ee extends he{static CanTranscode(n,s,p){return n===G.UASTC4x4&&s===C.ASTC_4X4_RGBA}getName(){return ee.Name}initialize(){super.initialize(),this.setModulePath(ee.WasmModuleURL,ee.WasmBinary)}}ee.WasmModuleURL="https://cdn.babylonjs.com/ktx2Transcoders/1/uastc_astc.wasm",ee.WasmBinary=null,ee.Name="UniversalTranscoder_UASTC_ASTC";class te extends he{static CanTranscode(n,s,p){return n===G.UASTC4x4&&s===C.BC7_RGBA}getName(){return te.Name}initialize(){super.initialize(),this.setModulePath(te.WasmModuleURL,te.WasmBinary)}}te.WasmModuleURL="https://cdn.babylonjs.com/ktx2Transcoders/1/uastc_bc7.wasm",te.WasmBinary=null,te.Name="UniversalTranscoder_UASTC_BC7";class re extends he{static CanTranscode(n,s,p){return n===G.UASTC4x4&&s===C.RGBA32&&!p}getName(){return re.Name}initialize(){super.initialize(),this._transcodeInPlace=!1,this.setModulePath(re.WasmModuleURL,re.WasmBinary)}async transcode(n,s,p,_,i,T,y,S,g){const w=(await this._loadModuleAsync()).module,[,U]=this._prepareTranscoding(_,i,T,g,4);return w.decode(_,i)===0?U.slice():null}}re.WasmModuleURL="https://cdn.babylonjs.com/ktx2Transcoders/1/uastc_rgba8_unorm_v2.wasm",re.WasmBinary=null,re.Name="UniversalTranscoder_UASTC_RGBA_UNORM";class ne extends he{static CanTranscode(n,s,p){return n===G.UASTC4x4&&s===C.RGBA32&&p}getName(){return ne.Name}initialize(){super.initialize(),this._transcodeInPlace=!1,this.setModulePath(ne.WasmModuleURL,ne.WasmBinary)}async transcode(n,s,p,_,i,T,y,S,g){const w=(await this._loadModuleAsync()).module,[,U]=this._prepareTranscoding(_,i,T,g,4);return w.decode(_,i)===0?U.slice():null}}ne.WasmModuleURL="https://cdn.babylonjs.com/ktx2Transcoders/1/uastc_rgba8_srgb_v2.wasm",ne.WasmBinary=null,ne.Name="UniversalTranscoder_UASTC_RGBA_SRGB";class ae extends he{static CanTranscode(n,s,p){return n===G.UASTC4x4&&s===C.R8}getName(){return ae.Name}initialize(){super.initialize(),this._transcodeInPlace=!1,this.setModulePath(ae.WasmModuleURL,ae.WasmBinary)}async transcode(n,s,p,_,i,T,y,S,g){const w=(await this._loadModuleAsync()).module,[,U]=this._prepareTranscoding(_,i,T,g,1);return w.decode(_,i)===0?U.slice():null}}ae.WasmModuleURL="https://cdn.babylonjs.com/ktx2Transcoders/1/uastc_r8_unorm.wasm",ae.WasmBinary=null,ae.Name="UniversalTranscoder_UASTC_R8_UNORM";class ie extends he{static CanTranscode(n,s,p){return n===G.UASTC4x4&&s===C.RG8}getName(){return ie.Name}initialize(){super.initialize(),this._transcodeInPlace=!1,this.setModulePath(ie.WasmModuleURL,ie.WasmBinary)}async transcode(n,s,p,_,i,T,y,S,g){const w=(await this._loadModuleAsync()).module,[,U]=this._prepareTranscoding(_,i,T,g,2);return w.decode(_,i)===0?U.slice():null}}ie.WasmModuleURL="https://cdn.babylonjs.com/ktx2Transcoders/1/uastc_rg8_unorm.wasm",ie.WasmBinary=null,ie.Name="UniversalTranscoder_UASTC_RG8_UNORM";class W extends D{getName(){return W.Name}async _getMSCBasisTranscoder(){return this._mscBasisTranscoderPromise?await this._mscBasisTranscoderPromise:(this._mscBasisTranscoderPromise=(W.WasmBinary?Promise.resolve(W.WasmBinary):Y.LoadWASM(D.GetWasmUrl(W.WasmModuleURL))).then(async n=>{if(W.JSModule&&typeof MSC_TRANSCODER>"u")globalThis.MSC_TRANSCODER=W.JSModule;else if(W.UseFromWorkerThread)importScripts(D.GetWasmUrl(W.JSModuleURL));else if(typeof MSC_TRANSCODER>"u")return await new Promise((s,p)=>{const _=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",D.GetWasmUrl(W.JSModuleURL)),i.onload=()=>{if(typeof MSC_TRANSCODER>"u"){p("MSC_TRANSCODER script loaded but MSC_TRANSCODER is not defined.");return}MSC_TRANSCODER({wasmBinary:n}).then(T=>{T.initTranscoders(),this._mscBasisModule=T,s()})},i.onerror=()=>{p("Can not load MSC_TRANSCODER script.")},_.appendChild(i)});return await new Promise(s=>{MSC_TRANSCODER({wasmBinary:n}).then(p=>{p.initTranscoders(),this._mscBasisModule=p,s()})})}),await this._mscBasisTranscoderPromise)}static CanTranscode(n,s,p){return!0}async transcode(n,s,p,_,i,T,y,S,g){return await this._getMSCBasisTranscoder().then(()=>{const w=this._mscBasisModule;let U,O,B,oe=null;try{U=n===G.UASTC4x4?new w.UastcImageTranscoder:new w.BasisLzEtc1sImageTranscoder;const E=n===G.UASTC4x4?w.TextureFormat.UASTC4x4:w.TextureFormat.ETC1S;O=new w.ImageInfo(E,_,i,p);const j=w.TranscodeTarget[C[s]];if(!w.isFormatSupported(j,E))throw new Error(`MSCTranscoder: Transcoding from "${G[n]}" to "${C[s]}" not supported by current transcoder build.`);if(n===G.ETC1S){const x=y.supercompressionGlobalData;U.decodePalettes(x.endpointCount,x.endpointsData,x.selectorCount,x.selectorsData),U.decodeTables(x.tablesData),O.flags=S.imageFlags,O.rgbByteOffset=0,O.rgbByteLength=S.rgbSliceByteLength,O.alphaByteOffset=S.alphaSliceByteOffset>0?S.rgbSliceByteLength:0,O.alphaByteLength=S.alphaSliceByteLength,B=U.transcodeImage(j,g,O,0,!1)}else O.flags=0,O.rgbByteOffset=0,O.rgbByteLength=T,O.alphaByteOffset=0,O.alphaByteLength=0,B=U.transcodeImage(j,g,O,0,y.hasAlpha,!1)}finally{U&&U.delete(),O&&O.delete(),B&&B.transcodedImage&&(oe=B.transcodedImage.get_typed_memory_view().slice(),B.transcodedImage.delete())}return oe})}}W.JSModuleURL="https://cdn.babylonjs.com/ktx2Transcoders/1/msc_basis_transcoder.js",W.WasmModuleURL="https://cdn.babylonjs.com/ktx2Transcoders/1/msc_basis_transcoder.wasm",W.WasmBinary=null,W.JSModule=null,W.UseFromWorkerThread=!0,W.Name="MSCTranscoder";let Fe,se,ot;const ct={env:{emscripten_notify_memory_growth:function(){ot=new Uint8Array(se.exports.memory.buffer)}}};class Ae{async init(){return Fe?await Fe:(typeof fetch<"u"?Fe=fetch(D.GetWasmUrl(Ae.WasmModuleURL)).then(async n=>{if(n.ok)return await n.arrayBuffer();throw new Error(`Could not fetch the wasm component for the Zstandard decompression lib: ${n.status} - ${n.statusText}`)}).then(async n=>await WebAssembly.instantiate(n,ct)).then(this._init):Fe=WebAssembly.instantiateStreaming(fetch(Ae.WasmModuleURL),ct).then(this._init),await Fe)}_init(n){se=n.instance,ct.env.emscripten_notify_memory_growth()}decode(n,s=0){if(!se)throw new Error("ZSTDDecoder: Await .init() before decoding.");const p=n.byteLength,_=se.exports.malloc(p);ot.set(n,_),s=s||Number(se.exports.ZSTD_findDecompressedSize(_,p));const i=se.exports.malloc(s),T=se.exports.ZSTD_decompress(i,s,_,p),y=ot.slice(i,i+T);return se.exports.free(_),se.exports.free(i),y}}Ae.WasmModuleURL="https://cdn.babylonjs.com/zstddec.wasm";const lr={ETC1S:{option:"forceRGBA",yes:{transcodeFormat:C.RGBA32,engineFormat:32856,roundToMultiple4:!1},no:{cap:"etc2",yes:{alpha:!0,yes:{transcodeFormat:C.ETC2_RGBA,engineFormat:37496},no:{transcodeFormat:C.ETC1_RGB,engineFormat:37492}},no:{cap:"etc1",alpha:!1,yes:{transcodeFormat:C.ETC1_RGB,engineFormat:36196},no:{cap:"bptc",yes:{transcodeFormat:C.BC7_RGBA,engineFormat:36492},no:{cap:"s3tc",yes:{alpha:!0,yes:{transcodeFormat:C.BC3_RGBA,engineFormat:33779},no:{transcodeFormat:C.BC1_RGB,engineFormat:33776}},no:{cap:"pvrtc",needsPowerOfTwo:!0,yes:{alpha:!0,yes:{transcodeFormat:C.PVRTC1_4_RGBA,engineFormat:35842},no:{transcodeFormat:C.PVRTC1_4_RGB,engineFormat:35840}},no:{transcodeFormat:C.RGBA32,engineFormat:32856,roundToMultiple4:!1}}}}}}},UASTC:{option:"forceRGBA",yes:{transcodeFormat:C.RGBA32,engineFormat:32856,roundToMultiple4:!1},no:{option:"forceR8",yes:{transcodeFormat:C.R8,engineFormat:33321,roundToMultiple4:!1},no:{option:"forceRG8",yes:{transcodeFormat:C.RG8,engineFormat:33323,roundToMultiple4:!1},no:{cap:"astc",yes:{transcodeFormat:C.ASTC_4X4_RGBA,engineFormat:37808},no:{cap:"bptc",yes:{transcodeFormat:C.BC7_RGBA,engineFormat:36492},no:{option:"useRGBAIfASTCBC7NotAvailableWhenUASTC",yes:{transcodeFormat:C.RGBA32,engineFormat:32856,roundToMultiple4:!1},no:{cap:"etc2",yes:{alpha:!0,yes:{transcodeFormat:C.ETC2_RGBA,engineFormat:37496},no:{transcodeFormat:C.ETC1_RGB,engineFormat:37492}},no:{cap:"etc1",yes:{transcodeFormat:C.ETC1_RGB,engineFormat:36196},no:{cap:"s3tc",yes:{alpha:!0,yes:{transcodeFormat:C.BC3_RGBA,engineFormat:33779},no:{transcodeFormat:C.BC1_RGB,engineFormat:33776}},no:{cap:"pvrtc",needsPowerOfTwo:!0,yes:{alpha:!0,yes:{transcodeFormat:C.PVRTC1_4_RGBA,engineFormat:35842},no:{transcodeFormat:C.PVRTC1_4_RGB,engineFormat:35840}},no:{transcodeFormat:C.RGBA32,engineFormat:32856,roundToMultiple4:!1}}}}}}}}}}}};class ut{static _IsLeafNode(n){return n.engineFormat!==void 0}get transcodeFormat(){return this._transcodeFormat}get engineFormat(){return this._engineFormat}get roundToMultiple4(){return this._roundToMultiple4}constructor(n,s,p,_,i){this._textureFormat=n,this._hasAlpha=s,this._isPowerOfTwo=p,this._caps=_,this._options=i??{},this.parseTree(lr)}parseTree(n){const s=this._textureFormat===G.UASTC4x4?n.UASTC:n.ETC1S;return s&&this._parseNode(s),s!==void 0}_parseNode(n){if(n)if(ut._IsLeafNode(n))this._transcodeFormat=n.transcodeFormat,this._engineFormat=n.engineFormat,this._roundToMultiple4=n.roundToMultiple4??!0;else{let s=!0;n.cap!==void 0&&(s=s&&!!this._caps[n.cap]),n.option!==void 0&&(s=s&&!!this._options[n.option]),n.alpha!==void 0&&(s=s&&this._hasAlpha===n.alpha),n.needsPowerOfTwo!==void 0&&(s=s&&this._isPowerOfTwo===n.needsPowerOfTwo),n.transcodeFormat!==void 0&&(Array.isArray(n.transcodeFormat)?s=s&&n.transcodeFormat.indexOf(this._transcodeFormat)!==-1:s=s&&n.transcodeFormat===this._transcodeFormat),this._parseNode(s?n.yes:n.no)}}}const Mt=c=>(c&c-1)===0&&c!==0;let Et=class fr{constructor(){this._transcoderMgr=new M}async decode(n,s,p){const _={...p,...fr.DefaultDecoderOptions},i=new He(n);if(!i.isValid())throw new Error("Invalid KT2 file: wrong signature");return i.parse(),i.needZSTDDecoder?(this._zstdDecoder||(this._zstdDecoder=new Ae),await this._zstdDecoder.init(),await this._decodeDataAsync(i,s,_)):await this._decodeDataAsync(i,s,_)}async _decodeDataAsync(n,s,p){const _=n.header.pixelWidth,i=n.header.pixelHeight,T=n.textureFormat,y=new ut(T,n.hasAlpha,Mt(_)&&Mt(i),s,p);p!=null&&p.transcodeFormatDecisionTree&&y.parseTree(p==null?void 0:p.transcodeFormatDecisionTree);const S=y.transcodeFormat,g=y.engineFormat,A=y.roundToMultiple4,w=this._transcoderMgr.findTranscoder(T,S,n.isInGammaSpace,p==null?void 0:p.bypassTranscoders);if(w===null)throw new Error(`no transcoder found to transcode source texture format "${G[T]}" to format "${C[S]}"`);const U=[],O=[],B={width:0,height:0,transcodedFormat:g,mipmaps:U,isInGammaSpace:n.isInGammaSpace,hasAlpha:n.hasAlpha,transcoderName:w.getName()};let oe=0;for(let E=0;E<n.header.levelCount;E++){E>0&&(oe+=Math.max(n.header.layerCount,1)*n.header.faceCount*Math.max(n.header.pixelDepth>>E-1,1));const j=Math.floor(_/(1<<E))||1,x=Math.floor(i/(1<<E))||1,Ge=n.header.faceCount,Pe=(j+3>>2)*(x+3>>2)*n.dfdBlock.bytesPlane[0],ze=n.levels[E].uncompressedByteLength;let z=n.data.buffer,X=n.levels[E].byteOffset+n.data.byteOffset,_e=0;n.header.supercompressionScheme===Be.ZStandard&&(z=this._zstdDecoder.decode(new Uint8Array(z,X,n.levels[E].byteLength),ze),X=0),E===0&&(B.width=A?j+3&-4:j,B.height=A?x+3&-4:x);for(let Se=0;Se<Ge;Se++){let ye,de=null;n.header.supercompressionScheme===Be.BasisLZ?(de=n.supercompressionGlobalData.imageDescs[oe+Se],ye=new Uint8Array(z,X+de.rgbSliceByteOffset,de.rgbSliceByteLength+de.alphaSliceByteLength)):(ye=new Uint8Array(z,X+_e,Pe),_e+=Pe);const We={data:null,width:j,height:x},ve=w.transcode(T,S,E,j,x,ze,n,de,ye).then(ge=>(We.data=ge,ge)).catch(ge=>(B.errors=B.errors??"",B.errors+=ge+`
`+ge.stack+`
`,null));O.push(ve),U.push(We)}}return await Promise.all(O),B}};Et.DefaultDecoderOptions={},M.RegisterTranscoder(ee),M.RegisterTranscoder(te),M.RegisterTranscoder(re),M.RegisterTranscoder(ne),M.RegisterTranscoder(ae),M.RegisterTranscoder(ie),M.RegisterTranscoder(W);var Ft=Object.freeze({__proto__:null,DataReader:Ee,KTX2Decoder:Et,KTX2FileReader:He,LiteTranscoder:he,LiteTranscoder_UASTC_ASTC:ee,LiteTranscoder_UASTC_BC7:te,LiteTranscoder_UASTC_R8_UNORM:ae,LiteTranscoder_UASTC_RG8_UNORM:ie,LiteTranscoder_UASTC_RGBA_SRGB:ne,LiteTranscoder_UASTC_RGBA_UNORM:re,MSCTranscoder:W,get SupercompressionScheme(){return Be},Transcoder:D,TranscoderManager:M,WASMMemoryManager:Y,ZSTDDecoder:Ae});function Gt(c,n){const s=(n==null?void 0:n.jsDecoderModule)||KTX2DECODER;c&&(c.wasmBaseUrl&&(s.Transcoder.WasmBaseUrl=c.wasmBaseUrl),c.wasmUASTCToASTC&&(s.LiteTranscoder_UASTC_ASTC.WasmModuleURL=c.wasmUASTCToASTC),c.wasmUASTCToBC7&&(s.LiteTranscoder_UASTC_BC7.WasmModuleURL=c.wasmUASTCToBC7),c.wasmUASTCToRGBA_UNORM&&(s.LiteTranscoder_UASTC_RGBA_UNORM.WasmModuleURL=c.wasmUASTCToRGBA_UNORM),c.wasmUASTCToRGBA_SRGB&&(s.LiteTranscoder_UASTC_RGBA_SRGB.WasmModuleURL=c.wasmUASTCToRGBA_SRGB),c.wasmUASTCToR8_UNORM&&(s.LiteTranscoder_UASTC_R8_UNORM.WasmModuleURL=c.wasmUASTCToR8_UNORM),c.wasmUASTCToRG8_UNORM&&(s.LiteTranscoder_UASTC_RG8_UNORM.WasmModuleURL=c.wasmUASTCToRG8_UNORM),c.jsMSCTranscoder&&(s.MSCTranscoder.JSModuleURL=c.jsMSCTranscoder),c.wasmMSCTranscoder&&(s.MSCTranscoder.WasmModuleURL=c.wasmMSCTranscoder),c.wasmZSTDDecoder&&(s.ZSTDDecoder.WasmModuleURL=c.wasmZSTDDecoder)),n&&(n.wasmUASTCToASTC&&(s.LiteTranscoder_UASTC_ASTC.WasmBinary=n.wasmUASTCToASTC),n.wasmUASTCToBC7&&(s.LiteTranscoder_UASTC_BC7.WasmBinary=n.wasmUASTCToBC7),n.wasmUASTCToRGBA_UNORM&&(s.LiteTranscoder_UASTC_RGBA_UNORM.WasmBinary=n.wasmUASTCToRGBA_UNORM),n.wasmUASTCToRGBA_SRGB&&(s.LiteTranscoder_UASTC_RGBA_SRGB.WasmBinary=n.wasmUASTCToRGBA_SRGB),n.wasmUASTCToR8_UNORM&&(s.LiteTranscoder_UASTC_R8_UNORM.WasmBinary=n.wasmUASTCToR8_UNORM),n.wasmUASTCToRG8_UNORM&&(s.LiteTranscoder_UASTC_RG8_UNORM.WasmBinary=n.wasmUASTCToRG8_UNORM),n.jsMSCTranscoder&&(s.MSCTranscoder.JSModule=n.jsMSCTranscoder),n.wasmMSCTranscoder&&(s.MSCTranscoder.WasmBinary=n.wasmMSCTranscoder),n.wasmZSTDDecoder&&(s.ZSTDDecoder.WasmBinary=n.wasmZSTDDecoder))}function dr(c){typeof c>"u"&&typeof KTX2DECODER<"u"&&(c=KTX2DECODER);let n;onmessage=s=>{if(s.data)switch(s.data.action){case"init":{const p=s.data.urls;p&&(p.jsDecoderModule&&typeof c>"u"&&(importScripts(p.jsDecoderModule),c=KTX2DECODER),Gt(p)),s.data.wasmBinaries&&Gt(void 0,{...s.data.wasmBinaries,jsDecoderModule:c}),n=new c.KTX2Decoder,postMessage({action:"init"});break}case"setDefaultDecoderOptions":{c.KTX2Decoder.DefaultDecoderOptions=s.data.options;break}case"decode":n.decode(s.data.data,s.data.caps,s.data.options).then(p=>{const _=[];for(let i=0;i<p.mipmaps.length;++i){const T=p.mipmaps[i];T&&T.data&&_.push(T.data.buffer)}postMessage({action:"decoded",success:!0,decodedData:p},_)}).catch(p=>{postMessage({action:"decoded",success:!1,msg:p})});break}}}function pr(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}function mr(c){if(Object.prototype.hasOwnProperty.call(c,"__esModule"))return c;var n=c.default;if(typeof n=="function"){var s=function p(){return this instanceof p?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(c).forEach(function(p){var _=Object.getOwnPropertyDescriptor(c,p);Object.defineProperty(s,p,_.get?_:{enumerable:!0,get:function(){return c[p]}})}),s}var ft={exports:{}},hr={},_r=Object.freeze({__proto__:null,default:hr}),lt=mr(_r),Wt;function yr(){return Wt||(Wt=1,(function(c,n){var s=(function(){var p=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(p=p||__filename),(function(_){_=_||{};var i=typeof _<"u"?_:{},T,y;i.ready=new Promise(function(t,e){T=t,y=e});var S={},g;for(g in i)i.hasOwnProperty(g)&&(S[g]=i[g]);var A=!1,w=!1,U=!1,O=!1;A=typeof window=="object",w=typeof importScripts=="function",U=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",O=!A&&!U&&!w;var B="";function oe(t){return i.locateFile?i.locateFile(t,B):B+t}var E,j,x,Ge,Pe;U?(w?B=lt.dirname(B)+"/":B=__dirname+"/",E=function(e,r){return Ge||(Ge=lt),Pe||(Pe=lt),e=Pe.normalize(e),Ge.readFileSync(e,r?null:"utf8")},x=function(e){var r=E(e,!0);return r.buffer||(r=new Uint8Array(r)),ye(r.buffer),r},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(t){if(!(t instanceof pa))throw t}),process.on("unhandledRejection",Re),i.inspect=function(){return"[Emscripten Module object]"}):O?(typeof read<"u"&&(E=function(e){return read(e)}),x=function(e){var r;return typeof readbuffer=="function"?new Uint8Array(readbuffer(e)):(r=read(e,"binary"),ye(typeof r=="object"),r)},typeof scriptArgs<"u"&&scriptArgs,typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(A||w)&&(w?B=self.location.href:typeof document<"u"&&document.currentScript&&(B=document.currentScript.src),p&&(B=p),B.indexOf("blob:")!==0?B=B.substr(0,B.lastIndexOf("/")+1):B="",E=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(x=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),j=function(t,e,r){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status==200||a.status==0&&a.response){e(a.response);return}r()},a.onerror=r,a.send(null)});var ze=i.print||console.log.bind(console),z=i.printErr||console.warn.bind(console);for(g in S)S.hasOwnProperty(g)&&(i[g]=S[g]);S=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var X;i.wasmBinary&&(X=i.wasmBinary),i.noExitRuntime,typeof WebAssembly!="object"&&Re("no native wasm support detected");var _e,Se=!1;function ye(t,e){t||Re("Assertion failed: "+e)}var de=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function We(t,e,r){for(var a=e+r,o=e;t[o]&&!(o>=a);)++o;if(o-e>16&&t.subarray&&de)return de.decode(t.subarray(e,o));for(var l="";e<o;){var d=t[e++];if(!(d&128)){l+=String.fromCharCode(d);continue}var u=t[e++]&63;if((d&224)==192){l+=String.fromCharCode((d&31)<<6|u);continue}var f=t[e++]&63;if((d&240)==224?d=(d&15)<<12|u<<6|f:d=(d&7)<<18|u<<12|f<<6|t[e++]&63,d<65536)l+=String.fromCharCode(d);else{var m=d-65536;l+=String.fromCharCode(55296|m>>10,56320|m&1023)}}return l}function ve(t,e){return t?We(I,t,e):""}function ge(t,e,r,a){if(!(a>0))return 0;for(var o=r,l=r+a-1,d=0;d<t.length;++d){var u=t.charCodeAt(d);if(u>=55296&&u<=57343){var f=t.charCodeAt(++d);u=65536+((u&1023)<<10)|f&1023}if(u<=127){if(r>=l)break;e[r++]=u}else if(u<=2047){if(r+1>=l)break;e[r++]=192|u>>6,e[r++]=128|u&63}else if(u<=65535){if(r+2>=l)break;e[r++]=224|u>>12,e[r++]=128|u>>6&63,e[r++]=128|u&63}else{if(r+3>=l)break;e[r++]=240|u>>18,e[r++]=128|u>>12&63,e[r++]=128|u>>6&63,e[r++]=128|u&63}}return e[r]=0,r-o}function Tr(t,e,r){return ge(t,I,e,r)}function wr(t){for(var e=0,r=0;r<t.length;++r){var a=t.charCodeAt(r);a>=55296&&a<=57343&&(a=65536+((a&1023)<<10)|t.charCodeAt(++r)&1023),a<=127?++e:a<=2047?e+=2:a<=65535?e+=3:e+=4}return e}var Dt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Rr(t,e){for(var r=t,a=r>>1,o=a+e/2;!(a>=o)&&De[a];)++a;if(r=a<<1,r-t>32&&Dt)return Dt.decode(I.subarray(t,r));for(var l="",d=0;!(d>=e/2);++d){var u=Te[t+d*2>>1];if(u==0)break;l+=String.fromCharCode(u)}return l}function Cr(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;r-=2;for(var a=e,o=r<t.length*2?r/2:t.length,l=0;l<o;++l){var d=t.charCodeAt(l);Te[e>>1]=d,e+=2}return Te[e>>1]=0,e-a}function br(t){return t.length*2}function Br(t,e){for(var r=0,a="";!(r>=e/4);){var o=V[t+r*4>>2];if(o==0)break;if(++r,o>=65536){var l=o-65536;a+=String.fromCharCode(55296|l>>10,56320|l&1023)}else a+=String.fromCharCode(o)}return a}function Ar(t,e,r){if(r===void 0&&(r=2147483647),r<4)return 0;for(var a=e,o=a+r-4,l=0;l<t.length;++l){var d=t.charCodeAt(l);if(d>=55296&&d<=57343){var u=t.charCodeAt(++l);d=65536+((d&1023)<<10)|u&1023}if(V[e>>2]=d,e+=4,e+4>o)break}return V[e>>2]=0,e-a}function Pr(t){for(var e=0,r=0;r<t.length;++r){var a=t.charCodeAt(r);a>=55296&&a<=57343&&++r,e+=4}return e}function Sr(t,e){return t%e>0&&(t+=e-t%e),t}var dt,Xe,I,Te,De,V,Z,$t,xt;function Lt(t){dt=t,i.HEAP8=Xe=new Int8Array(t),i.HEAP16=Te=new Int16Array(t),i.HEAP32=V=new Int32Array(t),i.HEAPU8=I=new Uint8Array(t),i.HEAPU16=De=new Uint16Array(t),i.HEAPU32=Z=new Uint32Array(t),i.HEAPF32=$t=new Float32Array(t),i.HEAPF64=xt=new Float64Array(t)}i.INITIAL_MEMORY;var $e,It=[],Vt=[],Ur=[],jt=[];Vt.push({func:function(){ir()}});function Or(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Gr(i.preRun.shift());Ze(It)}function Mr(){Ze(Vt)}function Er(){Ze(Ur)}function Fr(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Wr(i.postRun.shift());Ze(jt)}function Gr(t){It.unshift(t)}function Wr(t){jt.unshift(t)}var we=0,xe=null;function Dr(t){we++,i.monitorRunDependencies&&i.monitorRunDependencies(we)}function $r(t){if(we--,i.monitorRunDependencies&&i.monitorRunDependencies(we),we==0&&xe){var e=xe;xe=null,e()}}i.preloadedImages={},i.preloadedAudios={};function Re(t){i.onAbort&&i.onAbort(t),t+="",z(t),Se=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(t);throw y(e),e}function kt(t,e){return String.prototype.startsWith?t.startsWith(e):t.indexOf(e)===0}var xr="data:application/octet-stream;base64,";function Nt(t){return kt(t,xr)}var Lr="file://";function Ht(t){return kt(t,Lr)}var k="msc_basis_transcoder.wasm";Nt(k)||(k=oe(k));function zt(t){try{if(t==k&&X)return new Uint8Array(X);if(x)return x(t);throw"both async and sync fetching of the wasm failed"}catch(e){Re(e)}}function Ir(){if(!X&&(A||w)){if(typeof fetch=="function"&&!Ht(k))return fetch(k,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+k+"'";return t.arrayBuffer()}).catch(function(){return zt(k)});if(j)return new Promise(function(t,e){j(k,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return zt(k)})}function Vr(){var t={a:da};function e(d,u){var f=d.exports;i.asm=f,_e=i.asm.L,Lt(_e.buffer),$e=i.asm.O,$r()}Dr();function r(d){e(d.instance)}function a(d){return Ir().then(function(u){return WebAssembly.instantiate(u,t)}).then(d,function(u){z("failed to asynchronously prepare wasm: "+u),Re(u)})}function o(){return!X&&typeof WebAssembly.instantiateStreaming=="function"&&!Nt(k)&&!Ht(k)&&typeof fetch=="function"?fetch(k,{credentials:"same-origin"}).then(function(d){var u=WebAssembly.instantiateStreaming(d,t);return u.then(r,function(f){return z("wasm streaming compile failed: "+f),z("falling back to ArrayBuffer instantiation"),a(r)})}):a(r)}if(i.instantiateWasm)try{var l=i.instantiateWasm(t,e);return l}catch(d){return z("Module.instantiateWasm callback failed with error: "+d),!1}return o().catch(y),{}}function Ze(t){for(;t.length>0;){var e=t.shift();if(typeof e=="function"){e(i);continue}var r=e.func;typeof r=="number"?e.arg===void 0?$e.get(r)():$e.get(r)(e.arg):r(e.arg===void 0?null:e.arg)}}function jr(t,e,r,a){Re("Assertion failed: "+ve(t)+", at: "+[e?ve(e):"unknown filename",r,a?ve(a):"unknown function"])}function qe(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}function kr(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);Xt=t}var Xt=void 0;function $(t){for(var e="",r=t;I[r];)e+=Xt[I[r++]];return e}var Ue={},Ce={},Ke={},Nr=48,Hr=57;function Je(t){if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var e=t.charCodeAt(0);return e>=Nr&&e<=Hr?"_"+t:t}function Qe(t,e){return t=Je(t),new Function("body","return function "+t+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(e)}function pt(t,e){var r=Qe(e,function(a){this.name=e,this.message=a;var o=new Error(a).stack;o!==void 0&&(this.stack=this.toString()+`
`+o.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},r}var Oe=void 0;function R(t){throw new Oe(t)}var Zt=void 0;function Ye(t){throw new Zt(t)}function q(t,e,r){t.forEach(function(u){Ke[u]=e});function a(u){var f=r(u);f.length!==t.length&&Ye("Mismatched type converter count");for(var m=0;m<t.length;++m)K(t[m],f[m])}var o=new Array(e.length),l=[],d=0;e.forEach(function(u,f){Ce.hasOwnProperty(u)?o[f]=Ce[u]:(l.push(u),Ue.hasOwnProperty(u)||(Ue[u]=[]),Ue[u].push(function(){o[f]=Ce[u],++d,d===l.length&&a(o)}))}),l.length===0&&a(o)}function K(t,e,r){if(r=r||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var a=e.name;if(t||R('type "'+a+'" must have a positive integer typeid pointer'),Ce.hasOwnProperty(t)){if(r.ignoreDuplicateRegistrations)return;R("Cannot register type '"+a+"' twice")}if(Ce[t]=e,delete Ke[t],Ue.hasOwnProperty(t)){var o=Ue[t];delete Ue[t],o.forEach(function(l){l()})}}function zr(t,e,r,a,o){var l=qe(r);e=$(e),K(t,{name:e,fromWireType:function(d){return!!d},toWireType:function(d,u){return u?a:o},argPackAdvance:8,readValueFromPointer:function(d){var u;if(r===1)u=Xe;else if(r===2)u=Te;else if(r===4)u=V;else throw new TypeError("Unknown boolean type size: "+e);return this.fromWireType(u[d>>l])},destructorFunction:null})}function Xr(t){if(!(this instanceof pe)||!(t instanceof pe))return!1;for(var e=this.$$.ptrType.registeredClass,r=this.$$.ptr,a=t.$$.ptrType.registeredClass,o=t.$$.ptr;e.baseClass;)r=e.upcast(r),e=e.baseClass;for(;a.baseClass;)o=a.upcast(o),a=a.baseClass;return e===a&&r===o}function Zr(t){return{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}function mt(t){function e(r){return r.$$.ptrType.registeredClass.name}R(e(t)+" instance already deleted")}var ht=!1;function qt(t){}function qr(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}function Kt(t){t.count.value-=1;var e=t.count.value===0;e&&qr(t)}function Le(t){return typeof FinalizationGroup>"u"?(Le=function(e){return e},t):(ht=new FinalizationGroup(function(e){for(var r=e.next();!r.done;r=e.next()){var a=r.value;a.ptr?Kt(a):console.warn("object already deleted: "+a.ptr)}}),Le=function(e){return ht.register(e,e.$$,e.$$),e},qt=function(e){ht.unregister(e.$$)},Le(t))}function Kr(){if(this.$$.ptr||mt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Le(Object.create(Object.getPrototypeOf(this),{$$:{value:Zr(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function Jr(){this.$$.ptr||mt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&R("Object already scheduled for deletion"),qt(this),Kt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Qr(){return!this.$$.ptr}var Ie=void 0,Ve=[];function _t(){for(;Ve.length;){var t=Ve.pop();t.$$.deleteScheduled=!1,t.delete()}}function Yr(){return this.$$.ptr||mt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&R("Object already scheduled for deletion"),Ve.push(this),Ve.length===1&&Ie&&Ie(_t),this.$$.deleteScheduled=!0,this}function en(){pe.prototype.isAliasOf=Xr,pe.prototype.clone=Kr,pe.prototype.delete=Jr,pe.prototype.isDeleted=Qr,pe.prototype.deleteLater=Yr}function pe(){}var Jt={};function yt(t,e,r){if(t[e].overloadTable===void 0){var a=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||R("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[a.argCount]=a}}function vt(t,e,r){i.hasOwnProperty(t)?((r===void 0||i[t].overloadTable!==void 0&&i[t].overloadTable[r]!==void 0)&&R("Cannot register public name '"+t+"' twice"),yt(i,t,t),i.hasOwnProperty(r)&&R("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),i[t].overloadTable[r]=e):(i[t]=e,r!==void 0&&(i[t].numArguments=r))}function tn(t,e,r,a,o,l,d,u){this.name=t,this.constructor=e,this.instancePrototype=r,this.rawDestructor=a,this.baseClass=o,this.getActualType=l,this.upcast=d,this.downcast=u,this.pureVirtualFunctions=[]}function et(t,e,r){for(;e!==r;)e.upcast||R("Expected null or instance of "+r.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function rn(t,e){if(e===null)return this.isReference&&R("null is not a valid "+this.name),0;e.$$||R('Cannot pass "'+Me(e)+'" as a '+this.name),e.$$.ptr||R("Cannot pass deleted object as a pointer of type "+this.name);var r=e.$$.ptrType.registeredClass,a=et(e.$$.ptr,r,this.registeredClass);return a}function nn(t,e){var r;if(e===null)return this.isReference&&R("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),t!==null&&t.push(this.rawDestructor,r),r):0;e.$$||R('Cannot pass "'+Me(e)+'" as a '+this.name),e.$$.ptr||R("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&R("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var a=e.$$.ptrType.registeredClass;if(r=et(e.$$.ptr,a,this.registeredClass),this.isSmartPointer)switch(e.$$.smartPtr===void 0&&R("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?r=e.$$.smartPtr:R("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)r=e.$$.smartPtr;else{var o=e.clone();r=this.rawShare(r,ue(function(){o.delete()})),t!==null&&t.push(this.rawDestructor,r)}break;default:R("Unsupporting sharing policy")}return r}function an(t,e){if(e===null)return this.isReference&&R("null is not a valid "+this.name),0;e.$$||R('Cannot pass "'+Me(e)+'" as a '+this.name),e.$$.ptr||R("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&R("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var r=e.$$.ptrType.registeredClass,a=et(e.$$.ptr,r,this.registeredClass);return a}function tt(t){return this.fromWireType(Z[t>>2])}function sn(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t}function on(t){this.rawDestructor&&this.rawDestructor(t)}function cn(t){t!==null&&t.delete()}function Qt(t,e,r){if(e===r)return t;if(r.baseClass===void 0)return null;var a=Qt(t,e,r.baseClass);return a===null?null:r.downcast(a)}function un(){return Object.keys(je).length}function fn(){var t=[];for(var e in je)je.hasOwnProperty(e)&&t.push(je[e]);return t}function ln(t){Ie=t,Ve.length&&Ie&&Ie(_t)}function dn(){i.getInheritedInstanceCount=un,i.getLiveInheritedInstances=fn,i.flushPendingDeletes=_t,i.setDelayFunction=ln}var je={};function pn(t,e){for(e===void 0&&R("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}function mn(t,e){return e=pn(t,e),je[e]}function rt(t,e){(!e.ptrType||!e.ptr)&&Ye("makeClassHandle requires ptr and ptrType");var r=!!e.smartPtrType,a=!!e.smartPtr;return r!==a&&Ye("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Le(Object.create(t,{$$:{value:e}}))}function hn(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var r=mn(this.registeredClass,e);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=e,r.$$.smartPtr=t,r.clone();var a=r.clone();return this.destructor(t),a}function o(){return this.isSmartPointer?rt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):rt(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var l=this.registeredClass.getActualType(e),d=Jt[l];if(!d)return o.call(this);var u;this.isConst?u=d.constPointerType:u=d.pointerType;var f=Qt(e,this.registeredClass,u.registeredClass);return f===null?o.call(this):this.isSmartPointer?rt(u.registeredClass.instancePrototype,{ptrType:u,ptr:f,smartPtrType:this,smartPtr:t}):rt(u.registeredClass.instancePrototype,{ptrType:u,ptr:f})}function _n(){ce.prototype.getPointee=sn,ce.prototype.destructor=on,ce.prototype.argPackAdvance=8,ce.prototype.readValueFromPointer=tt,ce.prototype.deleteObject=cn,ce.prototype.fromWireType=hn}function ce(t,e,r,a,o,l,d,u,f,m,h){this.name=t,this.registeredClass=e,this.isReference=r,this.isConst=a,this.isSmartPointer=o,this.pointeeType=l,this.sharingPolicy=d,this.rawGetPointee=u,this.rawConstructor=f,this.rawShare=m,this.rawDestructor=h,!o&&e.baseClass===void 0?a?(this.toWireType=rn,this.destructorFunction=null):(this.toWireType=an,this.destructorFunction=null):this.toWireType=nn}function Yt(t,e,r){i.hasOwnProperty(t)||Ye("Replacing nonexistant public symbol"),i[t].overloadTable!==void 0&&r!==void 0?i[t].overloadTable[r]=e:(i[t]=e,i[t].argCount=r)}function yn(t,e,r){var a=i["dynCall_"+t];return r&&r.length?a.apply(null,[e].concat(r)):a.call(null,e)}function vn(t,e,r){return t.indexOf("j")!=-1?yn(t,e,r):$e.get(e).apply(null,r)}function gn(t,e){var r=[];return function(){r.length=arguments.length;for(var a=0;a<arguments.length;a++)r[a]=arguments[a];return vn(t,e,r)}}function J(t,e){t=$(t);function r(){return t.indexOf("j")!=-1?gn(t,e):$e.get(e)}var a=r();return typeof a!="function"&&R("unknown function pointer with signature "+t+": "+e),a}var er=void 0;function tr(t){var e=sr(t),r=$(e);return fe(e),r}function be(t,e){var r=[],a={};function o(l){if(!a[l]&&!Ce[l]){if(Ke[l]){Ke[l].forEach(o);return}r.push(l),a[l]=!0}}throw e.forEach(o),new er(t+": "+r.map(tr).join([", "]))}function Tn(t,e,r,a,o,l,d,u,f,m,h,v,b){h=$(h),l=J(o,l),u&&(u=J(d,u)),m&&(m=J(f,m)),b=J(v,b);var P=Je(h);vt(P,function(){be("Cannot construct "+h+" due to unbound types",[a])}),q([t,e,r],a?[a]:[],function(F){F=F[0];var L,H;a?(L=F.registeredClass,H=L.instancePrototype):H=pe.prototype;var Q=Qe(P,function(){if(Object.getPrototypeOf(this)!==Ne)throw new Oe("Use 'new' to construct "+h);if(le.constructor_body===void 0)throw new Oe(h+" has no accessible constructor");var ur=le.constructor_body[arguments.length];if(ur===void 0)throw new Oe("Tried to invoke ctor of "+h+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(le.constructor_body).toString()+") parameters instead!");return ur.apply(this,arguments)}),Ne=Object.create(H,{constructor:{value:Q}});Q.prototype=Ne;var le=new tn(h,Q,Ne,b,L,l,u,m),ma=new ce(h,le,!0,!1,!1),or=new ce(h+"*",le,!1,!1,!1),cr=new ce(h+" const*",le,!1,!0,!1);return Jt[t]={pointerType:or,constPointerType:cr},Yt(P,Q),[ma,or,cr]})}function rr(t,e){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var r=Qe(t.name||"unknownFunctionName",function(){});r.prototype=t.prototype;var a=new r,o=t.apply(a,e);return o instanceof Object?o:a}function nt(t){for(;t.length;){var e=t.pop(),r=t.pop();r(e)}}function gt(t,e,r,a,o){var l=e.length;l<2&&R("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var d=e[1]!==null&&r!==null,u=!1,f=1;f<e.length;++f)if(e[f]!==null&&e[f].destructorFunction===void 0){u=!0;break}for(var m=e[0].name!=="void",h="",v="",f=0;f<l-2;++f)h+=(f!==0?", ":"")+"arg"+f,v+=(f!==0?", ":"")+"arg"+f+"Wired";var b="return function "+Je(t)+"("+h+`) {
if (arguments.length !== `+(l-2)+`) {
throwBindingError('function `+t+" called with ' + arguments.length + ' arguments, expected "+(l-2)+` args!');
}
`;u&&(b+=`var destructors = [];
`);var P=u?"destructors":"null",F=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],L=[R,a,o,nt,e[0],e[1]];d&&(b+="var thisWired = classParam.toWireType("+P+`, this);
`);for(var f=0;f<l-2;++f)b+="var arg"+f+"Wired = argType"+f+".toWireType("+P+", arg"+f+"); // "+e[f+2].name+`
`,F.push("argType"+f),L.push(e[f+2]);if(d&&(v="thisWired"+(v.length>0?", ":"")+v),b+=(m?"var rv = ":"")+"invoker(fn"+(v.length>0?", ":"")+v+`);
`,u)b+=`runDestructors(destructors);
`;else for(var f=d?1:2;f<e.length;++f){var H=f===1?"thisWired":"arg"+(f-2)+"Wired";e[f].destructorFunction!==null&&(b+=H+"_dtor("+H+"); // "+e[f].name+`
`,F.push(H+"_dtor"),L.push(e[f].destructorFunction))}m&&(b+=`var ret = retType.fromWireType(rv);
return ret;
`),b+=`}
`,F.push(b);var Q=rr(Function,F).apply(null,L);return Q}function at(t,e){for(var r=[],a=0;a<t;a++)r.push(V[(e>>2)+a]);return r}function wn(t,e,r,a,o,l,d){var u=at(r,a);e=$(e),l=J(o,l),q([],[t],function(f){f=f[0];var m=f.name+"."+e;function h(){be("Cannot call "+m+" due to unbound types",u)}var v=f.registeredClass.constructor;return v[e]===void 0?(h.argCount=r-1,v[e]=h):(yt(v,e,m),v[e].overloadTable[r-1]=h),q([],u,function(b){var P=[b[0],null].concat(b.slice(1)),F=gt(m,P,null,l,d);return v[e].overloadTable===void 0?(F.argCount=r-1,v[e]=F):v[e].overloadTable[r-1]=F,[]}),[]})}function Rn(t,e,r,a,o,l){ye(e>0);var d=at(e,r);o=J(a,o);var u=[l],f=[];q([],[t],function(m){m=m[0];var h="constructor "+m.name;if(m.registeredClass.constructor_body===void 0&&(m.registeredClass.constructor_body=[]),m.registeredClass.constructor_body[e-1]!==void 0)throw new Oe("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+m.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return m.registeredClass.constructor_body[e-1]=function(){be("Cannot construct "+m.name+" due to unbound types",d)},q([],d,function(v){return m.registeredClass.constructor_body[e-1]=function(){arguments.length!==e-1&&R(h+" called with "+arguments.length+" arguments, expected "+(e-1)),f.length=0,u.length=e;for(var P=1;P<e;++P)u[P]=v[P].toWireType(f,arguments[P-1]);var F=o.apply(null,u);return nt(f),v[0].fromWireType(F)},[]}),[]})}function Cn(t,e,r,a,o,l,d,u){var f=at(r,a);e=$(e),l=J(o,l),q([],[t],function(m){m=m[0];var h=m.name+"."+e;u&&m.registeredClass.pureVirtualFunctions.push(e);function v(){be("Cannot call "+h+" due to unbound types",f)}var b=m.registeredClass.instancePrototype,P=b[e];return P===void 0||P.overloadTable===void 0&&P.className!==m.name&&P.argCount===r-2?(v.argCount=r-2,v.className=m.name,b[e]=v):(yt(b,e,h),b[e].overloadTable[r-2]=v),q([],f,function(F){var L=gt(h,F,m,l,d);return b[e].overloadTable===void 0?(L.argCount=r-2,b[e]=L):b[e].overloadTable[r-2]=L,[]}),[]})}function nr(t,e,r){return t instanceof Object||R(r+' with invalid "this": '+t),t instanceof e.registeredClass.constructor||R(r+' incompatible with "this" of type '+t.constructor.name),t.$$.ptr||R("cannot call emscripten binding method "+r+" on deleted object"),et(t.$$.ptr,t.$$.ptrType.registeredClass,e.registeredClass)}function bn(t,e,r,a,o,l,d,u,f,m){e=$(e),o=J(a,o),q([],[t],function(h){h=h[0];var v=h.name+"."+e,b={get:function(){be("Cannot access "+v+" due to unbound types",[r,d])},enumerable:!0,configurable:!0};return f?b.set=function(){be("Cannot access "+v+" due to unbound types",[r,d])}:b.set=function(P){R(v+" is a read-only property")},Object.defineProperty(h.registeredClass.instancePrototype,e,b),q([],f?[r,d]:[r],function(P){var F=P[0],L={get:function(){var Q=nr(this,h,v+" getter");return F.fromWireType(o(l,Q))},enumerable:!0};if(f){f=J(u,f);var H=P[1];L.set=function(Q){var Ne=nr(this,h,v+" setter"),le=[];f(m,Ne,H.toWireType(le,Q)),nt(le)}}return Object.defineProperty(h.registeredClass.instancePrototype,e,L),[]}),[]})}var Tt=[],N=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function wt(t){t>4&&--N[t].refcount===0&&(N[t]=void 0,Tt.push(t))}function Bn(){for(var t=0,e=5;e<N.length;++e)N[e]!==void 0&&++t;return t}function An(){for(var t=5;t<N.length;++t)if(N[t]!==void 0)return N[t];return null}function Pn(){i.count_emval_handles=Bn,i.get_first_emval=An}function ue(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var e=Tt.length?Tt.pop():N.length;return N[e]={refcount:1,value:t},e}}}function Sn(t,e){e=$(e),K(t,{name:e,fromWireType:function(r){var a=N[r].value;return wt(r),a},toWireType:function(r,a){return ue(a)},argPackAdvance:8,readValueFromPointer:tt,destructorFunction:null})}function Un(t,e,r){switch(e){case 0:return function(a){var o=r?Xe:I;return this.fromWireType(o[a])};case 1:return function(a){var o=r?Te:De;return this.fromWireType(o[a>>1])};case 2:return function(a){var o=r?V:Z;return this.fromWireType(o[a>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function On(t,e,r,a){var o=qe(r);e=$(e);function l(){}l.values={},K(t,{name:e,constructor:l,fromWireType:function(d){return this.constructor.values[d]},toWireType:function(d,u){return u.value},argPackAdvance:8,readValueFromPointer:Un(e,o,a),destructorFunction:null}),vt(e,l)}function ke(t,e){var r=Ce[t];return r===void 0&&R(e+" has unknown type "+tr(t)),r}function Mn(t,e,r){var a=ke(t,"enum");e=$(e);var o=a.constructor,l=Object.create(a.constructor.prototype,{value:{value:r},constructor:{value:Qe(a.name+"_"+e,function(){})}});o.values[r]=l,o[e]=l}function Me(t){if(t===null)return"null";var e=typeof t;return e==="object"||e==="array"||e==="function"?t.toString():""+t}function En(t,e){switch(e){case 2:return function(r){return this.fromWireType($t[r>>2])};case 3:return function(r){return this.fromWireType(xt[r>>3])};default:throw new TypeError("Unknown float type: "+t)}}function Fn(t,e,r){var a=qe(r);e=$(e),K(t,{name:e,fromWireType:function(o){return o},toWireType:function(o,l){if(typeof l!="number"&&typeof l!="boolean")throw new TypeError('Cannot convert "'+Me(l)+'" to '+this.name);return l},argPackAdvance:8,readValueFromPointer:En(e,a),destructorFunction:null})}function Gn(t,e,r,a,o,l){var d=at(e,r);t=$(t),o=J(a,o),vt(t,function(){be("Cannot call "+t+" due to unbound types",d)},e-1),q([],d,function(u){var f=[u[0],null].concat(u.slice(1));return Yt(t,gt(t,f,null,o,l),e-1),[]})}function Wn(t,e,r){switch(e){case 0:return r?function(o){return Xe[o]}:function(o){return I[o]};case 1:return r?function(o){return Te[o>>1]}:function(o){return De[o>>1]};case 2:return r?function(o){return V[o>>2]}:function(o){return Z[o>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function Dn(t,e,r,a,o){e=$(e),o===-1&&(o=4294967295);var l=qe(r),d=function(m){return m};if(a===0){var u=32-8*r;d=function(m){return m<<u>>>u}}var f=e.indexOf("unsigned")!=-1;K(t,{name:e,fromWireType:d,toWireType:function(m,h){if(typeof h!="number"&&typeof h!="boolean")throw new TypeError('Cannot convert "'+Me(h)+'" to '+this.name);if(h<a||h>o)throw new TypeError('Passing a number "'+Me(h)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+a+", "+o+"]!");return f?h>>>0:h|0},argPackAdvance:8,readValueFromPointer:Wn(e,l,a!==0),destructorFunction:null})}function $n(t,e,r){var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],o=a[e];function l(d){d=d>>2;var u=Z,f=u[d],m=u[d+1];return new o(dt,m,f)}r=$(r),K(t,{name:r,fromWireType:l,argPackAdvance:8,readValueFromPointer:l},{ignoreDuplicateRegistrations:!0})}function xn(t,e){e=$(e);var r=e==="std::string";K(t,{name:e,fromWireType:function(a){var o=Z[a>>2],l;if(r)for(var d=a+4,u=0;u<=o;++u){var f=a+4+u;if(u==o||I[f]==0){var m=f-d,h=ve(d,m);l===void 0?l=h:(l+="\0",l+=h),d=f+1}}else{for(var v=new Array(o),u=0;u<o;++u)v[u]=String.fromCharCode(I[a+4+u]);l=v.join("")}return fe(a),l},toWireType:function(a,o){o instanceof ArrayBuffer&&(o=new Uint8Array(o));var l,d=typeof o=="string";d||o instanceof Uint8Array||o instanceof Uint8ClampedArray||o instanceof Int8Array||R("Cannot pass non-string to std::string"),r&&d?l=function(){return wr(o)}:l=function(){return o.length};var u=l(),f=bt(4+u+1);if(Z[f>>2]=u,r&&d)Tr(o,f+4,u+1);else if(d)for(var m=0;m<u;++m){var h=o.charCodeAt(m);h>255&&(fe(f),R("String has UTF-16 code units that do not fit in 8 bits")),I[f+4+m]=h}else for(var m=0;m<u;++m)I[f+4+m]=o[m];return a!==null&&a.push(fe,f),f},argPackAdvance:8,readValueFromPointer:tt,destructorFunction:function(a){fe(a)}})}function Ln(t,e,r){r=$(r);var a,o,l,d,u;e===2?(a=Rr,o=Cr,d=br,l=function(){return De},u=1):e===4&&(a=Br,o=Ar,d=Pr,l=function(){return Z},u=2),K(t,{name:r,fromWireType:function(f){for(var m=Z[f>>2],h=l(),v,b=f+4,P=0;P<=m;++P){var F=f+4+P*e;if(P==m||h[F>>u]==0){var L=F-b,H=a(b,L);v===void 0?v=H:(v+="\0",v+=H),b=F+e}}return fe(f),v},toWireType:function(f,m){typeof m!="string"&&R("Cannot pass non-string to C++ string type "+r);var h=d(m),v=bt(4+h+e);return Z[v>>2]=h>>u,o(m,v+4,h+e),f!==null&&f.push(fe,v),v},argPackAdvance:8,readValueFromPointer:tt,destructorFunction:function(f){fe(f)}})}function In(t,e){e=$(e),K(t,{isVoid:!0,name:e,argPackAdvance:0,fromWireType:function(){},toWireType:function(r,a){}})}function me(t){return t||R("Cannot use deleted val. handle = "+t),N[t].value}function Vn(t,e,r){t=me(t),e=ke(e,"emval::as");var a=[],o=ue(a);return V[r>>2]=o,e.toWireType(a,t)}var jn={};function Rt(t){var e=jn[t];return e===void 0?$(t):e}var Ct=[];function kn(t,e,r,a){t=Ct[t],e=me(e),r=Rt(r),t(e,r,null,a)}function Nn(t){var e=Ct.length;return Ct.push(t),e}function Hn(t,e){for(var r=new Array(t),a=0;a<t;++a)r[a]=ke(V[(e>>2)+a],"parameter "+a);return r}function zn(t,e){for(var r=Hn(t,e),a=r[0],o=a.name+"_$"+r.slice(1).map(function(P){return P.name}).join("_")+"$",l=["retType"],d=[a],u="",f=0;f<t-1;++f)u+=(f!==0?", ":"")+"arg"+f,l.push("argType"+f),d.push(r[1+f]);for(var m=Je("methodCaller_"+o),h="return function "+m+`(handle, name, destructors, args) {
`,v=0,f=0;f<t-1;++f)h+="    var arg"+f+" = argType"+f+".readValueFromPointer(args"+(v?"+"+v:"")+`);
`,v+=r[f+1].argPackAdvance;h+="    var rv = handle[name]("+u+`);
`;for(var f=0;f<t-1;++f)r[f+1].deleteObject&&(h+="    argType"+f+".deleteObject(arg"+f+`);
`);a.isVoid||(h+=`    return retType.toWireType(destructors, rv);
`),h+=`};
`,l.push(h);var b=rr(Function,l).apply(null,d);return Nn(b)}function Xn(t){return t=Rt(t),ue(i[t])}function Zn(t,e){return t=me(t),e=me(e),ue(t[e])}function qn(t){t>4&&(N[t].refcount+=1)}function Kn(t){for(var e="",r=0;r<t;++r)e+=(r!==0?", ":"")+"arg"+r;for(var a="return function emval_allocator_"+t+`(constructor, argTypes, args) {
`,r=0;r<t;++r)a+="var argType"+r+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+r+'], "parameter '+r+`");
var arg`+r+" = argType"+r+`.readValueFromPointer(args);
args += argType`+r+`['argPackAdvance'];
`;return a+="var obj = new constructor("+e+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",a)(ke,i,ue)}var ar={};function Jn(t,e,r,a){t=me(t);var o=ar[e];return o||(o=Kn(e),ar[e]=o),o(t,r,a)}function Qn(t){return ue(Rt(t))}function Yn(){return ue({})}function ea(t){var e=N[t].value;nt(e),wt(t)}function ta(t,e,r){t=me(t),e=me(e),r=me(r),t[e]=r}function ra(t,e){t=ke(t,"_emval_take_value");var r=t.readValueFromPointer(e);return ue(r)}function na(){Re()}function aa(t,e,r){I.copyWithin(t,e,e+r)}function ia(){return I.length}function sa(t){try{return _e.grow(t-dt.byteLength+65535>>>16),Lt(_e.buffer),1}catch{}}function oa(t){var e=ia(),r=2147483648;if(t>r)return!1;for(var a=1;a<=4;a*=2){var o=e*(1+.2/a);o=Math.min(o,t+100663296);var l=Math.min(r,Sr(Math.max(t,o),65536)),d=sa(l);if(d)return!0}return!1}var it={mappings:{},buffers:[null,[],[]],printChar:function(t,e){var r=it.buffers[t];e===0||e===10?((t===1?ze:z)(We(r,0)),r.length=0):r.push(e)},varargs:void 0,get:function(){it.varargs+=4;var t=V[it.varargs-4>>2];return t},getStr:function(t){var e=ve(t);return e},get64:function(t,e){return t}};function ca(t){return 0}function ua(t,e,r,a,o){}function fa(t,e,r,a){for(var o=0,l=0;l<r;l++){for(var d=V[e+l*8>>2],u=V[e+(l*8+4)>>2],f=0;f<u;f++)it.printChar(t,I[d+f]);o+=u}return V[a>>2]=o,0}function la(t){}kr(),Oe=i.BindingError=pt(Error,"BindingError"),Zt=i.InternalError=pt(Error,"InternalError"),en(),_n(),dn(),er=i.UnboundTypeError=pt(Error,"UnboundTypeError"),Pn();var da={a:jr,J:zr,m:Tn,w:wn,r:Rn,l:Cn,h:bn,I:Sn,v:On,c:Mn,y:Fn,B:Gn,i:Dn,g:$n,z:xn,t:Ln,K:In,k:Vn,n:kn,b:wt,o:zn,q:Xn,e:Zn,f:qn,p:Jn,d:Qn,C:Yn,j:ea,A:ta,u:ra,s:na,F:aa,G:oa,H:ca,D:ua,x:fa,E:la};Vr();var ir=i.___wasm_call_ctors=function(){return(ir=i.___wasm_call_ctors=i.asm.M).apply(null,arguments)},fe=i._free=function(){return(fe=i._free=i.asm.N).apply(null,arguments)},bt=i._malloc=function(){return(bt=i._malloc=i.asm.P).apply(null,arguments)},sr=i.___getTypeName=function(){return(sr=i.___getTypeName=i.asm.Q).apply(null,arguments)};i.___embind_register_native_and_builtin_types=function(){return(i.___embind_register_native_and_builtin_types=i.asm.R).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.S).apply(null,arguments)};var st;function pa(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}xe=function t(){st||Bt(),st||(xe=t)};function Bt(t){if(we>0||(Or(),we>0))return;function e(){st||(st=!0,i.calledRun=!0,!Se&&(Mr(),Er(),T(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Fr()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),e()},1)):e()}if(i.run=Bt,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return Bt(),_.ready})})();c.exports=s})(ft)),ft.exports}var vr=yr(),gr=pr(vr);globalThis.KTX2DECODER=Ft,globalThis.MSC_TRANSCODER=void 0,W.JSModule=gr,dr(Ft)})();
